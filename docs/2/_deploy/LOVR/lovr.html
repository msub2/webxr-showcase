<!doctype html>
<html>

<head>
    <style>
        body,
        html {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            font-family: sans-serif;
        }

        #canvas {
            display: block;
            border-radius: 8px;
            background: #fff;
            max-width: 1080px;
            width: 80%;
            height: auto;
            box-shadow: 0 2px 8px rgba(0, 0, 0, .25);
            margin: 40px auto;
            outline: 0;
        }

        button {
            display: block;
            margin: 0 auto;
            font-size: 18px;
            border-radius: 4px;
            padding: 8px 16px;
        }
    </style>
    <meta charset=utf-8>
    <title>First Steps (LÃ–VR)</title>
</head>

<body>
    <div class=container>
        <canvas height=600 id=canvas tabindex=1 width=1080></canvas>
    </div>
    <script>
        var container = document.querySelector(".container");
        var canvas = document.getElementById("canvas");
        var button = document.createElement("button");
        button.textContent = "Enter VR";

        var Module = window.Module = {
            arguments: [],
            preRun: [],
            postRun: [],
            print: console.log.bind(console),
            printErr: console.error.bind(console),
            thisProgram: "./lovr",
            canvas: canvas
        };

        var project = 'game.lovr';
        if (project) {
            Module.arguments.push(project);
            Module.preRun.push(function () {
                Module.FS_createPreloadedFile("/", project, project, true, false);
            });
        }

        if (navigator.xr) {
            navigator.xr.isSessionSupported("immersive-vr").then(function (supported) {
                if (!supported) return;

                container.appendChild(button);

                var active = false;

                function onEnter() {
                    active = true;
                    button.textContent = 'Exit VR';
                }

                function onExit() {
                    active = false;
                    button.textContent = 'Enter VR';
                }

                button.addEventListener("click", function () {
                    if (!active) {
                        Module.lovr.enterVR().then(function (session) {
                            session.addEventListener("end", onExit);
                            onEnter();
                        });
                    } else {
                        Module.lovr.exitVR().then(onExit);
                    }
                });
            });
        }
    </script>
    <script async src=lovr.js></script>
</body>

</html>